<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NetCHASM: include/internal/HMState.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NetCHASM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_963e57a8294c229b5ff887c0b5b78922.html">internal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HMState.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2019, Oath Inc.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under the terms of the Apache 2.0 license. See LICENSE file in the root of the distribution for licensing details.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#ifndef INCLUDE_HMSTATE_H_</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#define INCLUDE_HMSTATE_H_</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;HMConstants.h&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;HMStorage.h&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;HMDataCheckList.h&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;HMLogBase.h&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;HMAuxCache.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;HMControlLinuxSocket.h&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;HMHashMD5.h&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classHMState.html">   24</a></span>&#160;<span class="keyword">class </span><a class="code" href="classHMState.html">HMState</a></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="classHMState.html">HMState</a>() :</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        m_useBackendConfigs(<span class="keyword">false</span>),</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        m_masterConfigLoaded(<span class="keyword">false</span>),</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        m_configsLoaded(<span class="keyword">false</span>),</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        m_stateActive(<span class="keyword">false</span>),</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        m_storageClass(HM_STORAGE_MDBM),</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        m_eventClass(HM_EVENT_QUEUE),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        m_httpDefaultCheckClass(HM_CHECK_PLUGIN_HTTP_CURL),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        m_ftpDefaultCheckClass(HM_CHECK_PLUGIN_FTP_CURL),</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        m_tcpDefaultCheckClass(HM_CHECK_PLUGIN_TCP_RAW),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        m_dnsDefaultCheckClass(HM_CHECK_PLUGIN_DNS_ARES),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        m_noneDefaultCheckClass(HM_CHECK_PLUGIN_DEFAULT),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        m_auxDefaultCheckClass(HM_CHECK_PLUGIN_AUX_CURL),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        m_dnsLookupClass(HM_DNS_PLUGIN_ARES),</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        m_dnsLookupTimeout(HM_DEFAULT_DNS_RESOLUTION_TIMEOUT),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        m_dnsRetries(HM_DEFAULT_DNS_RETRIES),</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        m_nMaxThreads(1),</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        m_nMinThreads(1),</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        m_connectionTimeout(3000),</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        m_logClass(HM_LOG_PLUGIN_TEXT),</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        m_logLevel(HM_LOG_NOTICE),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        m_logPath(HM_DEFAULT_LOG_PATH),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        m_socketPath(HM_DEFAULT_USD_PATH),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        m_maxLogQueue(0),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        m_auxPolicy(HM_STORAGE_COMMIT_ALWAYS),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        m_healthCheckPolicy(HM_STORAGE_COMMIT_ALWAYS),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        m_storageLockPolicy(HM_STORAGE_RW_LOCKS){}</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classHMState.html">HMState</a>(<a class="code" href="classHMState.html">HMState</a>&amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    ~<a class="code" href="classHMState.html">HMState</a>() { <a class="code" href="classHMState.html#a62a997a34a3444273eac329dee23fd7e">closeBackend</a>(); <a class="code" href="classHMState.html#add3ebcc9cf280cab1efc08edf8c5cead">m_datastore</a>.reset();  };</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#a17888a318b6e952eaa19fa1f2ec2944e">validateConfigs</a>(<span class="keyword">const</span> std::string&amp; masterConfig);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">         Parse the master configuration file. Does not parse the health check configs. Sets the internal variables for the state according to the passed master config.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">         \param the path to the master config file.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">         \return true if the master config loaded correctly.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#aa46981262d47ea47cd0eecf5bf553ae4">parseMasterConfig</a>(<span class="keyword">const</span> std::string&amp; masterConfig);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">         Parse the health check configs. The function will use the paths loaded from the master config from the previous call to parseMasterConfig. It will also prepare the DNS cache and the check list classes.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">         \return true if the health check configs parsed correctly.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#a2853f87714962905c193ae394ea49670">setupDaemonstate</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">const</span> std::string&amp; <a class="code" href="classHMState.html#a239aba313d0f0d6ec24359803b51cb46">getMasterConfig</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    HM_STORAGE_CLASS <a class="code" href="classHMState.html#a6260aa20c5c24f483b056114227b828d">getStorageType</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    HM_LOG_PLUGIN_CLASS  <a class="code" href="classHMState.html#acc70663a78795e7d9e17aedd081f2239">getDefaultLogType</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    HM_DNS_PLUGIN_CLASS <a class="code" href="classHMState.html#afe2807fd11f3b93ead0d44c83f121cff">getDefaultDNSLookupType</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    HM_EVENT_PLUGIN_CLASS <a class="code" href="classHMState.html#a896d5e156126ffdd9459779579e951b3">getDefaultEventType</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    HM_CHECK_PLUGIN_CLASS <a class="code" href="classHMState.html#a127c6ac99070dff3b3768d5d95c86af6">getDefaultHTTPCheckype</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    HM_CHECK_PLUGIN_CLASS <a class="code" href="classHMState.html#ae4925ba4cce7d3f8da161025294c63c1">getDefaultFTPCheckype</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    HM_CHECK_PLUGIN_CLASS <a class="code" href="classHMState.html#a6006725f0012fab2fc930c6d53e15350">getDefaultTCPCheckype</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    HM_CHECK_PLUGIN_CLASS <a class="code" href="classHMState.html#a0720192bbf47db02eb36db0abf8dcf43">getDefaultDNSCheckype</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    HM_CHECK_PLUGIN_CLASS <a class="code" href="classHMState.html#a33b0527f0e1b0c0390cad29df33fbbd5">getDefaultNoneCheckype</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::string <a class="code" href="classHMState.html#aa1733cf1446c181ca883a263f87040f3">getLogPath</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    HM_LOG_LEVEL <a class="code" href="classHMState.html#a5ce621511655962423febb64927a8146">getLogLevel</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    std::string <a class="code" href="classHMState.html#a85f74944d5c93f17a16b85bdb8874e82">getLogFormat</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    uint32_t <a class="code" href="classHMState.html#af74cb9b5a849505b52ea7182a1edc75b">getMaxLogQueueLength</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    uint64_t <a class="code" href="classHMState.html#aaf288816e247ce0bb1caa1ac57ca1b20">getConnectionTimeout</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    uint64_t <a class="code" href="classHMState.html#a6898d406abfbbe7ae7ee8b1ee9c3a965">getMaxThreads</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    uint64_t <a class="code" href="classHMState.html#a2cffbd8137829331b264b5b5aef16ff8">getMinThreads</a>();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    uint32_t <a class="code" href="classHMState.html#a9360c257ff7a059309153126f0a0e183">getDNSLookupTimeout</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    uint32_t <a class="code" href="classHMState.html#a24a35046ae6dad81f669d1c3f9526f99">getDNSRetries</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    std::string <a class="code" href="classHMState.html#ad65628dfbc71a87dfd10b72c0ea13ba7">getStoragePath</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    std::string <a class="code" href="classHMState.html#a9769cf4cd9ec8c666f23db12346d8252">getSocketPath</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#adeb4be0c443df25f57b75c9fa99f15f9">getDNSAddress</a>(<a class="code" href="classHMIPAddress.html">HMIPAddress</a>&amp; addr) <span class="keyword">const</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a7a24db75fdd0b75a73e63c274a690e51">setMasterConfig</a>(<span class="keyword">const</span> std::string&amp; masterConfig);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#aff0179536021d1993ce4a2504db05111">setConnectionTimeout</a>(uint64_t connectionTimeout);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a68fb9cefb0174dab78fedfe2c7fbf7f5">setDNSServer</a>(<a class="code" href="classHMIPAddress.html">HMIPAddress</a> server);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a96c9d4b11a24821b14705a176d0fb614">setSocketPath</a>(<span class="keyword">const</span> std::string&amp; path);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#a56518918e78ffa43ee87888563c0bcc2">loadAllConfigs</a>();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a1315bf48288cf0d94ce27bd9f8828777">generateHostCheckList</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">         Generate the DNS checks required in the DNS check list. Populates the DNS cache with empty entries. Populates the DNS call back to reschedule the needed health checks when a DNS entry is updated.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a72259bc03d5a0f074799d19f8a9af6e2">generateDNSCheckList</a>();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#adf953d294f5928f75792c4bfd5bce698">forceHealthCheck</a>(<span class="keyword">const</span> std::string&amp; hostGroup, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#adf953d294f5928f75792c4bfd5bce698">forceHealthCheck</a>(<span class="keyword">const</span> std::string&amp; hostGroup, <span class="keyword">const</span> std::string&amp; hostName, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a61e8c03c6b11afb85872d479b4cda5b5">forceDNSCheck</a>(<span class="keyword">const</span> std::string&amp; hostGroup, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a61e8c03c6b11afb85872d479b4cda5b5">forceDNSCheck</a>(<span class="keyword">const</span> std::string&amp; hostGroup, <span class="keyword">const</span> std::string&amp; hostName, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#af6d450642c0b68ba136ac69e12bb711d">openBackend</a>(<span class="keywordtype">bool</span> readOnly);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a62a997a34a3444273eac329dee23fd7e">closeBackend</a>();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a11f133df808d0668cca0424b60a039b6">restoreRunningCheckState</a>(std::shared_ptr&lt;HMState&gt; src);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#abeb8ea3027a71c3fbeb7b5438d981fc0">resheduleHealthChecks</a>(std::shared_ptr&lt;HMState&gt; src, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a189af4472faeba1b1eda32ecb02c5bec">resheduleDNSChecks</a>(std::shared_ptr&lt;HMState&gt; src, <a class="code" href="classHMWorkQueue.html">HMWorkQueue</a>&amp; workQueue);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#a1f52e9758b80ddba2fe66f643c328951">updateBackend</a>(std::shared_ptr&lt;HMState&gt; src);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#ab9891946368eb88febe521be17839995">restoreStoredCheckState</a>();</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">         Hash the host group map.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">         \param the hash to update with the hash of the host group map.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">         \param the variable to store the hash.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">void</span>  <a class="code" href="classHMState.html#aff5265d8252d91b49752ab859d8a899e">HashHostGroupMap</a> (<a class="code" href="classHMHashMD5.html">HMHashMD5</a>&amp; hash, <a class="code" href="classHMHash.html">HMHash</a>&amp; hashValue);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">         Dump the configs from backend to file.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">         \param config format.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">         \param filename where the configs need to be written.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#aa72b998aeba6fb0689b4b2992c60b86c">writeConfigs</a>(HM_CONFIG_PLUGIN_CLASS configs, <span class="keyword">const</span> std::string &amp;fileName);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">const</span> <a class="code" href="classHMHash.html">HMHash</a>&amp; <a class="code" href="classHMState.html#aaede5dfbf7939ad379cad614cb576c93">getHash</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classHMState.html#aa2f38bf0210c7cbb414a58fc56d59f9e">setHash</a>(<span class="keyword">const</span> <a class="code" href="classHMHash.html">HMHash</a>&amp; hash);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classHMState.html#af3526870088fb31d177fcb53dde9f155">  393</a></span>&#160;    <a class="code" href="classHMDNSCache.html">HMDNSCache</a> <a class="code" href="classHMState.html#af3526870088fb31d177fcb53dde9f155">m_dnsCache</a>;</div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classHMState.html#a941057d2b08587b3ed319f6d19b071e6">  395</a></span>&#160;    <a class="code" href="classHMDataCheckList.html">HMDataCheckList</a> <a class="code" href="classHMState.html#a941057d2b08587b3ed319f6d19b071e6">m_checkList</a>;</div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classHMState.html#a48c4d0ef86564629d54a9ba76a5e0a80">  397</a></span>&#160;    HMDataHostGroupMap <a class="code" href="classHMState.html#a48c4d0ef86564629d54a9ba76a5e0a80">m_hostGroups</a>;</div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classHMState.html#a0e578634726f7463e00f4c5592db6c43">  399</a></span>&#160;    HMWaitList <a class="code" href="classHMState.html#a0e578634726f7463e00f4c5592db6c43">m_dnsWaitList</a>;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classHMState.html#a0e383759595be905b60bba024b0f4a33">  401</a></span>&#160;    <a class="code" href="classHMAuxCache.html">HMAuxCache</a> <a class="code" href="classHMState.html#a0e383759595be905b60bba024b0f4a33">m_auxCache</a>;</div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classHMState.html#add3ebcc9cf280cab1efc08edf8c5cead">  403</a></span>&#160;    std::unique_ptr&lt;HMStorage&gt; <a class="code" href="classHMState.html#add3ebcc9cf280cab1efc08edf8c5cead">m_datastore</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    </div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classHMState.html#a940221e58988d6f92c3ace5573ae0461">parseMasterYaml</a>(<span class="keyword">const</span> std::string&amp; masterConfig);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    std::vector&lt;std::string&gt; m_configDirs;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    std::vector&lt;std::string&gt; m_configFiles;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">bool</span> m_useBackendConfigs;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordtype">bool</span> m_masterConfigLoaded;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">bool</span> m_configsLoaded;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">bool</span> m_stateActive;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    HM_STORAGE_CLASS m_storageClass;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    HM_EVENT_PLUGIN_CLASS m_eventClass;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    HM_CHECK_PLUGIN_CLASS m_httpDefaultCheckClass;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    HM_CHECK_PLUGIN_CLASS m_ftpDefaultCheckClass;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    HM_CHECK_PLUGIN_CLASS m_tcpDefaultCheckClass;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    HM_CHECK_PLUGIN_CLASS m_dnsDefaultCheckClass;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    HM_CHECK_PLUGIN_CLASS m_noneDefaultCheckClass;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    HM_CHECK_PLUGIN_CLASS m_auxDefaultCheckClass;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    HM_DNS_PLUGIN_CLASS m_dnsLookupClass;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    uint32_t m_dnsLookupTimeout;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    uint32_t m_dnsRetries;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    uint32_t m_nMaxThreads;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    uint32_t m_nMinThreads;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    uint64_t m_connectionTimeout;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    HM_LOG_PLUGIN_CLASS m_logClass;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    HM_LOG_LEVEL m_logLevel;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    std::string m_logPath;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    std::string m_storagePath;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="classHMIPAddress.html">HMIPAddress</a> m_dnsServer;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    std::string m_socketPath;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    std::string m_logTimeFormat;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    uint32_t m_maxLogQueue;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    HM_STORAGE_COMMIT_POLICY m_auxPolicy;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    HM_STORAGE_COMMIT_POLICY m_healthCheckPolicy;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    HM_STORAGE_LOCK_POLICY m_storageLockPolicy;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classHMHash.html">HMHash</a> m_hash;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    std::string m_masterConfig;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;};</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* INCLUDE_HMSTATE_H_ */</span><span class="preprocessor"></span></div><div class="ttc" id="classHMState_html_adeb4be0c443df25f57b75c9fa99f15f9"><div class="ttname"><a href="classHMState.html#adeb4be0c443df25f57b75c9fa99f15f9">HMState::getDNSAddress</a></div><div class="ttdeci">bool getDNSAddress(HMIPAddress &amp;addr) const</div><div class="ttdoc">Get the current DNS server to query for DNS resolutions. </div></div>
<div class="ttc" id="classHMState_html_a1f52e9758b80ddba2fe66f643c328951"><div class="ttname"><a href="classHMState.html#a1f52e9758b80ddba2fe66f643c328951">HMState::updateBackend</a></div><div class="ttdeci">void updateBackend(std::shared_ptr&lt; HMState &gt; src)</div><div class="ttdoc">Force the backend to updated for all checks removed or changed during the reload. ...</div></div>
<div class="ttc" id="classHMState_html_ad65628dfbc71a87dfd10b72c0ea13ba7"><div class="ttname"><a href="classHMState.html#ad65628dfbc71a87dfd10b72c0ea13ba7">HMState::getStoragePath</a></div><div class="ttdeci">std::string getStoragePath() const</div><div class="ttdoc">Get the current path to the backend storage. </div></div>
<div class="ttc" id="classHMState_html_a68fb9cefb0174dab78fedfe2c7fbf7f5"><div class="ttname"><a href="classHMState.html#a68fb9cefb0174dab78fedfe2c7fbf7f5">HMState::setDNSServer</a></div><div class="ttdeci">void setDNSServer(HMIPAddress server)</div><div class="ttdoc">Set the DNS server to use for all resolutions. </div></div>
<div class="ttc" id="classHMState_html_a941057d2b08587b3ed319f6d19b071e6"><div class="ttname"><a href="classHMState.html#a941057d2b08587b3ed319f6d19b071e6">HMState::m_checkList</a></div><div class="ttdeci">HMDataCheckList m_checkList</div><div class="ttdoc">Master Structure of health check information. </div><div class="ttdef"><b>Definition:</b> HMState.h:395</div></div>
<div class="ttc" id="classHMState_html_ab9891946368eb88febe521be17839995"><div class="ttname"><a href="classHMState.html#ab9891946368eb88febe521be17839995">HMState::restoreStoredCheckState</a></div><div class="ttdeci">void restoreStoredCheckState()</div><div class="ttdoc">Restore the results from the backend. </div></div>
<div class="ttc" id="classHMState_html_a2853f87714962905c193ae394ea49670"><div class="ttname"><a href="classHMState.html#a2853f87714962905c193ae394ea49670">HMState::setupDaemonstate</a></div><div class="ttdeci">bool setupDaemonstate()</div><div class="ttdoc">Parse the health check configs and setup the Daemon state. </div></div>
<div class="ttc" id="classHMState_html_a96c9d4b11a24821b14705a176d0fb614"><div class="ttname"><a href="classHMState.html#a96c9d4b11a24821b14705a176d0fb614">HMState::setSocketPath</a></div><div class="ttdeci">void setSocketPath(const std::string &amp;path)</div><div class="ttdoc">Set the socket path to use for the Linux socket. </div></div>
<div class="ttc" id="classHMState_html_a940221e58988d6f92c3ace5573ae0461"><div class="ttname"><a href="classHMState.html#a940221e58988d6f92c3ace5573ae0461">HMState::parseMasterYaml</a></div><div class="ttdeci">bool parseMasterYaml(const std::string &amp;masterConfig)</div><div class="ttdoc">Parse the master config in the YAML format. </div></div>
<div class="ttc" id="classHMState_html_a56518918e78ffa43ee87888563c0bcc2"><div class="ttname"><a href="classHMState.html#a56518918e78ffa43ee87888563c0bcc2">HMState::loadAllConfigs</a></div><div class="ttdeci">bool loadAllConfigs()</div><div class="ttdoc">Load all the configs. </div></div>
<div class="ttc" id="classHMState_html_a239aba313d0f0d6ec24359803b51cb46"><div class="ttname"><a href="classHMState.html#a239aba313d0f0d6ec24359803b51cb46">HMState::getMasterConfig</a></div><div class="ttdeci">const std::string &amp; getMasterConfig() const</div><div class="ttdoc">Get the current master config loaded. </div></div>
<div class="ttc" id="classHMState_html_aaf288816e247ce0bb1caa1ac57ca1b20"><div class="ttname"><a href="classHMState.html#aaf288816e247ce0bb1caa1ac57ca1b20">HMState::getConnectionTimeout</a></div><div class="ttdeci">uint64_t getConnectionTimeout() const</div><div class="ttdoc">Get the current default connection timeout for all checks. </div></div>
<div class="ttc" id="classHMState_html_a6898d406abfbbe7ae7ee8b1ee9c3a965"><div class="ttname"><a href="classHMState.html#a6898d406abfbbe7ae7ee8b1ee9c3a965">HMState::getMaxThreads</a></div><div class="ttdeci">uint64_t getMaxThreads()</div><div class="ttdoc">Get the current max number of work threads. </div></div>
<div class="ttc" id="classHMState_html_a11f133df808d0668cca0424b60a039b6"><div class="ttname"><a href="classHMState.html#a11f133df808d0668cca0424b60a039b6">HMState::restoreRunningCheckState</a></div><div class="ttdeci">void restoreRunningCheckState(std::shared_ptr&lt; HMState &gt; src)</div><div class="ttdoc">Copy the current check state. </div></div>
<div class="ttc" id="classHMState_html_a72259bc03d5a0f074799d19f8a9af6e2"><div class="ttname"><a href="classHMState.html#a72259bc03d5a0f074799d19f8a9af6e2">HMState::generateDNSCheckList</a></div><div class="ttdeci">void generateDNSCheckList()</div><div class="ttdoc">Generate the DNS checks required in the DNS check list. </div></div>
<div class="ttc" id="classHMState_html_a62a997a34a3444273eac329dee23fd7e"><div class="ttname"><a href="classHMState.html#a62a997a34a3444273eac329dee23fd7e">HMState::closeBackend</a></div><div class="ttdeci">void closeBackend()</div><div class="ttdoc">Close the backend. </div></div>
<div class="ttc" id="classHMState_html_aa2f38bf0210c7cbb414a58fc56d59f9e"><div class="ttname"><a href="classHMState.html#aa2f38bf0210c7cbb414a58fc56d59f9e">HMState::setHash</a></div><div class="ttdeci">void setHash(const HMHash &amp;hash)</div><div class="ttdoc">Set the config&amp;#39;s hash to the state. </div></div>
<div class="ttc" id="classHMAuxCache_html"><div class="ttname"><a href="classHMAuxCache.html">HMAuxCache</a></div><div class="ttdoc">Main internal Aux Cache class. </div><div class="ttdef"><b>Definition:</b> HMAuxCache.h:255</div></div>
<div class="ttc" id="classHMState_html_acc70663a78795e7d9e17aedd081f2239"><div class="ttname"><a href="classHMState.html#acc70663a78795e7d9e17aedd081f2239">HMState::getDefaultLogType</a></div><div class="ttdeci">HM_LOG_PLUGIN_CLASS getDefaultLogType() const</div><div class="ttdoc">Get the current logging class. </div></div>
<div class="ttc" id="classHMDNSCache_html"><div class="ttname"><a href="classHMDNSCache.html">HMDNSCache</a></div><div class="ttdoc">The class that stores all of the DNS resolutions. </div><div class="ttdef"><b>Definition:</b> HMDNSCache.h:17</div></div>
<div class="ttc" id="classHMState_html_af3526870088fb31d177fcb53dde9f155"><div class="ttname"><a href="classHMState.html#af3526870088fb31d177fcb53dde9f155">HMState::m_dnsCache</a></div><div class="ttdeci">HMDNSCache m_dnsCache</div><div class="ttdoc">The main DNS cache. </div><div class="ttdef"><b>Definition:</b> HMState.h:393</div></div>
<div class="ttc" id="classHMState_html_af74cb9b5a849505b52ea7182a1edc75b"><div class="ttname"><a href="classHMState.html#af74cb9b5a849505b52ea7182a1edc75b">HMState::getMaxLogQueueLength</a></div><div class="ttdeci">uint32_t getMaxLogQueueLength() const</div><div class="ttdoc">Get the current max log queue length. </div></div>
<div class="ttc" id="classHMState_html_abeb8ea3027a71c3fbeb7b5438d981fc0"><div class="ttname"><a href="classHMState.html#abeb8ea3027a71c3fbeb7b5438d981fc0">HMState::resheduleHealthChecks</a></div><div class="ttdeci">void resheduleHealthChecks(std::shared_ptr&lt; HMState &gt; src, HMWorkQueue &amp;workQueue)</div><div class="ttdoc">Reschedule HealthChecks on a reload. </div></div>
<div class="ttc" id="classHMState_html_a2cffbd8137829331b264b5b5aef16ff8"><div class="ttname"><a href="classHMState.html#a2cffbd8137829331b264b5b5aef16ff8">HMState::getMinThreads</a></div><div class="ttdeci">uint64_t getMinThreads()</div><div class="ttdoc">Get the current minimum number of work threads. </div></div>
<div class="ttc" id="classHMState_html_a5ce621511655962423febb64927a8146"><div class="ttname"><a href="classHMState.html#a5ce621511655962423febb64927a8146">HMState::getLogLevel</a></div><div class="ttdeci">HM_LOG_LEVEL getLogLevel() const</div><div class="ttdoc">Get the current log level. </div></div>
<div class="ttc" id="classHMState_html_a0720192bbf47db02eb36db0abf8dcf43"><div class="ttname"><a href="classHMState.html#a0720192bbf47db02eb36db0abf8dcf43">HMState::getDefaultDNSCheckype</a></div><div class="ttdeci">HM_CHECK_PLUGIN_CLASS getDefaultDNSCheckype() const</div><div class="ttdoc">Get the current DNS check class. </div></div>
<div class="ttc" id="classHMState_html_add3ebcc9cf280cab1efc08edf8c5cead"><div class="ttname"><a href="classHMState.html#add3ebcc9cf280cab1efc08edf8c5cead">HMState::m_datastore</a></div><div class="ttdeci">std::unique_ptr&lt; HMStorage &gt; m_datastore</div><div class="ttdoc">Back end data store class. </div><div class="ttdef"><b>Definition:</b> HMState.h:403</div></div>
<div class="ttc" id="classHMState_html_a0e578634726f7463e00f4c5592db6c43"><div class="ttname"><a href="classHMState.html#a0e578634726f7463e00f4c5592db6c43">HMState::m_dnsWaitList</a></div><div class="ttdeci">HMWaitList m_dnsWaitList</div><div class="ttdoc">Map used to queue health checks after a successful DNS query. </div><div class="ttdef"><b>Definition:</b> HMState.h:399</div></div>
<div class="ttc" id="classHMState_html_a7a24db75fdd0b75a73e63c274a690e51"><div class="ttname"><a href="classHMState.html#a7a24db75fdd0b75a73e63c274a690e51">HMState::setMasterConfig</a></div><div class="ttdeci">void setMasterConfig(const std::string &amp;masterConfig)</div><div class="ttdoc">Set the path to load the master configuration. </div></div>
<div class="ttc" id="classHMState_html_a24a35046ae6dad81f669d1c3f9526f99"><div class="ttname"><a href="classHMState.html#a24a35046ae6dad81f669d1c3f9526f99">HMState::getDNSRetries</a></div><div class="ttdeci">uint32_t getDNSRetries() const</div><div class="ttdoc">Get the current number of DNS lookup retries. </div></div>
<div class="ttc" id="classHMState_html_a0e383759595be905b60bba024b0f4a33"><div class="ttname"><a href="classHMState.html#a0e383759595be905b60bba024b0f4a33">HMState::m_auxCache</a></div><div class="ttdeci">HMAuxCache m_auxCache</div><div class="ttdoc">Storage for the aux Info. </div><div class="ttdef"><b>Definition:</b> HMState.h:401</div></div>
<div class="ttc" id="classHMDataCheckList_html"><div class="ttname"><a href="classHMDataCheckList.html">HMDataCheckList</a></div><div class="ttdoc">Class to hold the list of health checks to perform. </div><div class="ttdef"><b>Definition:</b> HMDataCheckList.h:37</div></div>
<div class="ttc" id="classHMState_html_a6260aa20c5c24f483b056114227b828d"><div class="ttname"><a href="classHMState.html#a6260aa20c5c24f483b056114227b828d">HMState::getStorageType</a></div><div class="ttdeci">HM_STORAGE_CLASS getStorageType() const</div><div class="ttdoc">Get the current storage type. </div></div>
<div class="ttc" id="classHMState_html_aa46981262d47ea47cd0eecf5bf553ae4"><div class="ttname"><a href="classHMState.html#aa46981262d47ea47cd0eecf5bf553ae4">HMState::parseMasterConfig</a></div><div class="ttdeci">bool parseMasterConfig(const std::string &amp;masterConfig)</div><div class="ttdoc">Parse the master configuration file. </div></div>
<div class="ttc" id="classHMState_html_a9769cf4cd9ec8c666f23db12346d8252"><div class="ttname"><a href="classHMState.html#a9769cf4cd9ec8c666f23db12346d8252">HMState::getSocketPath</a></div><div class="ttdeci">std::string getSocketPath() const</div><div class="ttdoc">Get the current socket path. </div></div>
<div class="ttc" id="classHMState_html_aff5265d8252d91b49752ab859d8a899e"><div class="ttname"><a href="classHMState.html#aff5265d8252d91b49752ab859d8a899e">HMState::HashHostGroupMap</a></div><div class="ttdeci">void HashHostGroupMap(HMHashMD5 &amp;hash, HMHash &amp;hashValue)</div><div class="ttdoc">Hash the host group map. </div></div>
<div class="ttc" id="classHMState_html_a33b0527f0e1b0c0390cad29df33fbbd5"><div class="ttname"><a href="classHMState.html#a33b0527f0e1b0c0390cad29df33fbbd5">HMState::getDefaultNoneCheckype</a></div><div class="ttdeci">HM_CHECK_PLUGIN_CLASS getDefaultNoneCheckype() const</div><div class="ttdoc">Get the current none check class. </div></div>
<div class="ttc" id="classHMState_html_a896d5e156126ffdd9459779579e951b3"><div class="ttname"><a href="classHMState.html#a896d5e156126ffdd9459779579e951b3">HMState::getDefaultEventType</a></div><div class="ttdeci">HM_EVENT_PLUGIN_CLASS getDefaultEventType() const</div><div class="ttdoc">Get the current event loop class. </div></div>
<div class="ttc" id="classHMState_html_aa1733cf1446c181ca883a263f87040f3"><div class="ttname"><a href="classHMState.html#aa1733cf1446c181ca883a263f87040f3">HMState::getLogPath</a></div><div class="ttdeci">std::string getLogPath() const</div><div class="ttdoc">Get the current log path. </div></div>
<div class="ttc" id="classHMState_html_a9360c257ff7a059309153126f0a0e183"><div class="ttname"><a href="classHMState.html#a9360c257ff7a059309153126f0a0e183">HMState::getDNSLookupTimeout</a></div><div class="ttdeci">uint32_t getDNSLookupTimeout() const</div><div class="ttdoc">Get the current default DNS resolution timeout. </div></div>
<div class="ttc" id="classHMState_html_a48c4d0ef86564629d54a9ba76a5e0a80"><div class="ttname"><a href="classHMState.html#a48c4d0ef86564629d54a9ba76a5e0a80">HMState::m_hostGroups</a></div><div class="ttdeci">HMDataHostGroupMap m_hostGroups</div><div class="ttdoc">Host Group information. </div><div class="ttdef"><b>Definition:</b> HMState.h:397</div></div>
<div class="ttc" id="classHMState_html_a189af4472faeba1b1eda32ecb02c5bec"><div class="ttname"><a href="classHMState.html#a189af4472faeba1b1eda32ecb02c5bec">HMState::resheduleDNSChecks</a></div><div class="ttdeci">void resheduleDNSChecks(std::shared_ptr&lt; HMState &gt; src, HMWorkQueue &amp;workQueue)</div><div class="ttdoc">Reschedule DNS checks on a reload. </div></div>
<div class="ttc" id="classHMState_html_a6006725f0012fab2fc930c6d53e15350"><div class="ttname"><a href="classHMState.html#a6006725f0012fab2fc930c6d53e15350">HMState::getDefaultTCPCheckype</a></div><div class="ttdeci">HM_CHECK_PLUGIN_CLASS getDefaultTCPCheckype() const</div><div class="ttdoc">Get the current TCP check class. </div></div>
<div class="ttc" id="classHMState_html_a1315bf48288cf0d94ce27bd9f8828777"><div class="ttname"><a href="classHMState.html#a1315bf48288cf0d94ce27bd9f8828777">HMState::generateHostCheckList</a></div><div class="ttdeci">void generateHostCheckList()</div><div class="ttdoc">Generate the host check list based on the loaded configs. </div></div>
<div class="ttc" id="classHMState_html_aaede5dfbf7939ad379cad614cb576c93"><div class="ttname"><a href="classHMState.html#aaede5dfbf7939ad379cad614cb576c93">HMState::getHash</a></div><div class="ttdeci">const HMHash &amp; getHash() const</div><div class="ttdoc">Get the current hash of configs. </div></div>
<div class="ttc" id="classHMState_html_adf953d294f5928f75792c4bfd5bce698"><div class="ttname"><a href="classHMState.html#adf953d294f5928f75792c4bfd5bce698">HMState::forceHealthCheck</a></div><div class="ttdeci">void forceHealthCheck(const std::string &amp;hostGroup, HMWorkQueue &amp;workQueue)</div><div class="ttdoc">Force a health check for all hosts within a specific host group. </div></div>
<div class="ttc" id="classHMState_html_a61e8c03c6b11afb85872d479b4cda5b5"><div class="ttname"><a href="classHMState.html#a61e8c03c6b11afb85872d479b4cda5b5">HMState::forceDNSCheck</a></div><div class="ttdeci">void forceDNSCheck(const std::string &amp;hostGroup, HMWorkQueue &amp;workQueue)</div><div class="ttdoc">Force a DNS resolution for all hosts within a specific host group. </div></div>
<div class="ttc" id="classHMHash_html"><div class="ttname"><a href="classHMHash.html">HMHash</a></div><div class="ttdoc">Class to hold the hash value. </div><div class="ttdef"><b>Definition:</b> HMStorage.h:206</div></div>
<div class="ttc" id="classHMState_html_afe2807fd11f3b93ead0d44c83f121cff"><div class="ttname"><a href="classHMState.html#afe2807fd11f3b93ead0d44c83f121cff">HMState::getDefaultDNSLookupType</a></div><div class="ttdeci">HM_DNS_PLUGIN_CLASS getDefaultDNSLookupType() const</div><div class="ttdoc">Get the current DNS resolution class. </div></div>
<div class="ttc" id="classHMIPAddress_html"><div class="ttname"><a href="classHMIPAddress.html">HMIPAddress</a></div><div class="ttdef"><b>Definition:</b> HMIPAddress.h:14</div></div>
<div class="ttc" id="classHMState_html_aff0179536021d1993ce4a2504db05111"><div class="ttname"><a href="classHMState.html#aff0179536021d1993ce4a2504db05111">HMState::setConnectionTimeout</a></div><div class="ttdeci">void setConnectionTimeout(uint64_t connectionTimeout)</div><div class="ttdoc">Set the default connection timeout for health checks. </div></div>
<div class="ttc" id="classHMWorkQueue_html"><div class="ttname"><a href="classHMWorkQueue.html">HMWorkQueue</a></div><div class="ttdef"><b>Definition:</b> HMWorkQueue.h:21</div></div>
<div class="ttc" id="classHMState_html_a85f74944d5c93f17a16b85bdb8874e82"><div class="ttname"><a href="classHMState.html#a85f74944d5c93f17a16b85bdb8874e82">HMState::getLogFormat</a></div><div class="ttdeci">std::string getLogFormat() const</div><div class="ttdoc">Get the current log time stamp format string. </div></div>
<div class="ttc" id="classHMState_html_af6d450642c0b68ba136ac69e12bb711d"><div class="ttname"><a href="classHMState.html#af6d450642c0b68ba136ac69e12bb711d">HMState::openBackend</a></div><div class="ttdeci">bool openBackend(bool readOnly)</div><div class="ttdoc">Open the backend storage. </div></div>
<div class="ttc" id="classHMHashMD5_html"><div class="ttname"><a href="classHMHashMD5.html">HMHashMD5</a></div><div class="ttdef"><b>Definition:</b> HMHashMD5.h:16</div></div>
<div class="ttc" id="classHMState_html"><div class="ttname"><a href="classHMState.html">HMState</a></div><div class="ttdoc">The core state class for NetCHASM. </div><div class="ttdef"><b>Definition:</b> HMState.h:24</div></div>
<div class="ttc" id="classHMState_html_a127c6ac99070dff3b3768d5d95c86af6"><div class="ttname"><a href="classHMState.html#a127c6ac99070dff3b3768d5d95c86af6">HMState::getDefaultHTTPCheckype</a></div><div class="ttdeci">HM_CHECK_PLUGIN_CLASS getDefaultHTTPCheckype() const</div><div class="ttdoc">Get the current HTTP check class. </div></div>
<div class="ttc" id="classHMState_html_aa72b998aeba6fb0689b4b2992c60b86c"><div class="ttname"><a href="classHMState.html#aa72b998aeba6fb0689b4b2992c60b86c">HMState::writeConfigs</a></div><div class="ttdeci">bool writeConfigs(HM_CONFIG_PLUGIN_CLASS configs, const std::string &amp;fileName)</div><div class="ttdoc">Dump the configs from backend to file. </div></div>
<div class="ttc" id="classHMState_html_ae4925ba4cce7d3f8da161025294c63c1"><div class="ttname"><a href="classHMState.html#ae4925ba4cce7d3f8da161025294c63c1">HMState::getDefaultFTPCheckype</a></div><div class="ttdeci">HM_CHECK_PLUGIN_CLASS getDefaultFTPCheckype() const</div><div class="ttdoc">Get the current FTP check class. </div></div>
<div class="ttc" id="classHMState_html_a17888a318b6e952eaa19fa1f2ec2944e"><div class="ttname"><a href="classHMState.html#a17888a318b6e952eaa19fa1f2ec2944e">HMState::validateConfigs</a></div><div class="ttdeci">bool validateConfigs(const std::string &amp;masterConfig)</div><div class="ttdoc">Check the configurations to make sure they are valid. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
