<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NetCHASM: HMWork Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NetCHASM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classHMWork-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">HMWork Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Base class for all work classes.  
 <a href="classHMWork.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="HMWork_8h_source.html">HMWork.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for HMWork:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classHMWork.png" usemap="#HMWork_map" alt=""/>
  <map id="HMWork_map" name="HMWork_map">
<area href="classHMWorkAuxFetch.html" title="Base class for the Work classes which fetch Auxiliary information. " alt="HMWorkAuxFetch" shape="rect" coords="0,56,182,80"/>
<area href="classHMWorkDNSLookup.html" title="Base class for the work classes that conduct DNS resolutions. " alt="HMWorkDNSLookup" shape="rect" coords="192,56,374,80"/>
<area href="classHMWorkHealthCheck.html" title="Base Class for the work classes which conduct health checks. " alt="HMWorkHealthCheck" shape="rect" coords="576,56,758,80"/>
<area href="classHMWorkAuxFetchCurl.html" title="Curl implementation to retrieve auxiliary information for NetCHASM. " alt="HMWorkAuxFetchCurl" shape="rect" coords="0,112,182,136"/>
<area href="classHMWorkDNSLookupAres.html" alt="HMWorkDNSLookupAres" shape="rect" coords="384,112,566,136"/>
<area href="classHMWorkDNSLookupLibEvent.html" alt="HMWorkDNSLookupLibEvent" shape="rect" coords="384,168,566,192"/>
<area href="classHMWorkHealthCheckCurl.html" title="Class to implement conducting a health check using CURL. " alt="HMWorkHealthCheckCurl" shape="rect" coords="768,112,950,136"/>
<area href="classHMWorkHealthCheckDNS.html" title="Class to conduct a health check through DNS using the Ares Library. " alt="HMWorkHealthCheckDNS" shape="rect" coords="768,168,950,192"/>
<area href="classHMWorkHealthCheckLibEvent.html" title="Implementation of an HTTP/HTTPS check using libevent. Note* Currently experimental. " alt="HMWorkHealthCheckLibEvent" shape="rect" coords="768,224,950,248"/>
<area href="classHMWorkHealthCheckNone.html" title="Health Check Implementation to check none. ie always up. " alt="HMWorkHealthCheckNone" shape="rect" coords="768,280,950,304"/>
<area href="classHMWorkHealthCheckTCP.html" title="Health Check implementation to do a TCP connection. " alt="HMWorkHealthCheckTCP" shape="rect" coords="768,336,950,360"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af8f00deb19c9a21e607df14a3bffd448"><td class="memItemLeft" align="right" valign="top"><a id="af8f00deb19c9a21e607df14a3bffd448"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>HMWork</b> (const std::string &amp;hostname, const <a class="el" href="classHMIPAddress.html">HMIPAddress</a> &amp;ip, const <a class="el" href="classHMDataHostCheck.html">HMDataHostCheck</a> &amp;hostcheck)</td></tr>
<tr class="separator:af8f00deb19c9a21e607df14a3bffd448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb8b7ac5f0ac87c352fdccaf921cedaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHMWork.html#abb8b7ac5f0ac87c352fdccaf921cedaf">updateState</a> (<a class="el" href="classHMStateManager.html">HMStateManager</a> *stateManager, <a class="el" href="classHMEventLoop.html">HMEventLoop</a> *eventLoop)</td></tr>
<tr class="memdesc:abb8b7ac5f0ac87c352fdccaf921cedaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to update the state manager and event loop in case of a reload.  <a href="#abb8b7ac5f0ac87c352fdccaf921cedaf">More...</a><br /></td></tr>
<tr class="separator:abb8b7ac5f0ac87c352fdccaf921cedaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f872d970567c7fe6457cd3283ceda10"><td class="memItemLeft" align="right" valign="top">virtual HM_WORK_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHMWork.html#a9f872d970567c7fe6457cd3283ceda10">processWork</a> ()=0</td></tr>
<tr class="memdesc:a9f872d970567c7fe6457cd3283ceda10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to process the work in the work order.  <a href="#a9f872d970567c7fe6457cd3283ceda10">More...</a><br /></td></tr>
<tr class="separator:a9f872d970567c7fe6457cd3283ceda10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9fbfb2ad7b261f855562c166ed83db"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHMWork.html#a2b9fbfb2ad7b261f855562c166ed83db">init</a> (<a class="el" href="classHMWorkState.html">HMWorkState</a> &amp;state)=0</td></tr>
<tr class="memdesc:a2b9fbfb2ad7b261f855562c166ed83db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to init and setup the work order.  <a href="#a2b9fbfb2ad7b261f855562c166ed83db">More...</a><br /></td></tr>
<tr class="separator:a2b9fbfb2ad7b261f855562c166ed83db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb02520bb25ba40e056098bbae74c0b7"><td class="memItemLeft" align="right" valign="top">virtual HM_WORK_TYPE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHMWork.html#acb02520bb25ba40e056098bbae74c0b7">getWorkType</a> ()=0</td></tr>
<tr class="memdesc:acb02520bb25ba40e056098bbae74c0b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to get the work type.  <a href="#acb02520bb25ba40e056098bbae74c0b7">More...</a><br /></td></tr>
<tr class="separator:acb02520bb25ba40e056098bbae74c0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afb4afa358d1188d8648c9b6ebfc085d7"><td class="memItemLeft" align="right" valign="top"><a id="afb4afa358d1188d8648c9b6ebfc085d7"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>m_hostname</b></td></tr>
<tr class="separator:afb4afa358d1188d8648c9b6ebfc085d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedba6e6996a543971d4d3ee4a4297fe7"><td class="memItemLeft" align="right" valign="top"><a id="aedba6e6996a543971d4d3ee4a4297fe7"></a>
<a class="el" href="classHMIPAddress.html">HMIPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_ipAddress</b></td></tr>
<tr class="separator:aedba6e6996a543971d4d3ee4a4297fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988a7a18ddb6b0a61c277da806f387be"><td class="memItemLeft" align="right" valign="top"><a id="a988a7a18ddb6b0a61c277da806f387be"></a>
<a class="el" href="classHMDataHostCheck.html">HMDataHostCheck</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_hostCheck</b></td></tr>
<tr class="separator:a988a7a18ddb6b0a61c277da806f387be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1a82250f2a507e83075a60912b3900"><td class="memItemLeft" align="right" valign="top"><a id="a4e1a82250f2a507e83075a60912b3900"></a>
HM_RESPONSE&#160;</td><td class="memItemRight" valign="bottom"><b>m_response</b></td></tr>
<tr class="separator:a4e1a82250f2a507e83075a60912b3900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f6aae4e8e6e09727772763db272772d"><td class="memItemLeft" align="right" valign="top"><a id="a4f6aae4e8e6e09727772763db272772d"></a>
HM_REASON&#160;</td><td class="memItemRight" valign="bottom"><b>m_reason</b></td></tr>
<tr class="separator:a4f6aae4e8e6e09727772763db272772d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf3b84443edee429961cf1af1c9d6676"><td class="memItemLeft" align="right" valign="top"><a id="acf3b84443edee429961cf1af1c9d6676"></a>
<a class="el" href="classHMTimeStamp.html">HMTimeStamp</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_start</b></td></tr>
<tr class="separator:acf3b84443edee429961cf1af1c9d6676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b70dfe549cdaff4338864a80bbe9320"><td class="memItemLeft" align="right" valign="top"><a id="a8b70dfe549cdaff4338864a80bbe9320"></a>
<a class="el" href="classHMTimeStamp.html">HMTimeStamp</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_end</b></td></tr>
<tr class="separator:a8b70dfe549cdaff4338864a80bbe9320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff38d7e216784626790ac269c883cb3"><td class="memItemLeft" align="right" valign="top"><a id="a0ff38d7e216784626790ac269c883cb3"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_ID</b></td></tr>
<tr class="separator:a0ff38d7e216784626790ac269c883cb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf773c026b27e960e94c065bc746e59"><td class="memItemLeft" align="right" valign="top"><a id="a9cf773c026b27e960e94c065bc746e59"></a>
HM_WORK_STATUS&#160;</td><td class="memItemRight" valign="bottom"><b>m_workStatus</b></td></tr>
<tr class="separator:a9cf773c026b27e960e94c065bc746e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ab76b23bb096d9f9c1e358f9d6dd4dd62"><td class="memItemLeft" align="right" valign="top"><a id="ab76b23bb096d9f9c1e358f9d6dd4dd62"></a>
<a class="el" href="classHMTimeStamp.html">HMTimeStamp</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_timeout</b></td></tr>
<tr class="separator:ab76b23bb096d9f9c1e358f9d6dd4dd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3406b2eceb8723885f14d82dad1724f7"><td class="memItemLeft" align="right" valign="top"><a id="a3406b2eceb8723885f14d82dad1724f7"></a>
<a class="el" href="classHMStateManager.html">HMStateManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_stateManager</b></td></tr>
<tr class="separator:a3406b2eceb8723885f14d82dad1724f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e0a9da2c4c71b353f00735e4cb6e40"><td class="memItemLeft" align="right" valign="top"><a id="a76e0a9da2c4c71b353f00735e4cb6e40"></a>
<a class="el" href="classHMEventLoop.html">HMEventLoop</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_eventLoop</b></td></tr>
<tr class="separator:a76e0a9da2c4c71b353f00735e4cb6e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for all work classes. </p>
<p>This class is the basis for all work classes supported by NetCHASM. The class provides access to the current state, event queue, and state manager. Each work type must specify the target hostname, ip address, and checktype. The class maintains the thread id for debugging purposes and the check reason and response codes. Base classes must override the following functions: processWork - This function is called to actually conduct the work for the worktype init - This function is called once when the work is created getWorkType - called to return the type of work we are processing.</p>
<p>Additionally, all base classes should call updateState before accessing the internal statemanager and eventqueue pointers to make sure the state is updated after a possible configuration reload. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="acb02520bb25ba40e056098bbae74c0b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb02520bb25ba40e056098bbae74c0b7">&#9670;&nbsp;</a></span>getWorkType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual HM_WORK_TYPE HMWork::getWorkType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to get the work type. </p>
<p>Called to get the work type. </p><dl class="section return"><dt>Returns</dt><dd>the current HM_WORK_TYPE used to determine the appropriate processing task. </dd></dl>

<p>Implemented in <a class="el" href="classHMWorkAuxFetch.html#a547c27ee0e4918196dccccc524b2e2dd">HMWorkAuxFetch</a>, <a class="el" href="classHMWorkHealthCheck.html#a0a37a235ba70204397f73eb600921c9b">HMWorkHealthCheck</a>, and <a class="el" href="classHMWorkDNSLookup.html#a5a10ab2483e5bc7fcc06bb6b5868a579">HMWorkDNSLookup</a>.</p>

</div>
</div>
<a id="a2b9fbfb2ad7b261f855562c166ed83db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9fbfb2ad7b261f855562c166ed83db">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void HMWork::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHMWorkState.html">HMWorkState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to init and setup the work order. </p>
<p>Called to init and setup the work order. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">the</td><td>work state to use for the work order. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classHMWorkHealthCheckLibEvent.html#aee3d8fa5fabe29551d30269efe75f585">HMWorkHealthCheckLibEvent</a>, <a class="el" href="classHMWorkAuxFetch.html#ad38d5c712984de7c4a3b8614f1abc6c1">HMWorkAuxFetch</a>, <a class="el" href="classHMWorkHealthCheckDNS.html#a321f962e891e76ceb932c5d414fb104d">HMWorkHealthCheckDNS</a>, <a class="el" href="classHMWorkHealthCheck.html#a30173dde6f6c68c6112e82a61500d51c">HMWorkHealthCheck</a>, <a class="el" href="classHMWorkHealthCheckTCP.html#add95d2116d8b9e15168ae3f5171ca16a">HMWorkHealthCheckTCP</a>, <a class="el" href="classHMWorkHealthCheckCurl.html#a4a661f06b703f34d4adcd54ad79e396f">HMWorkHealthCheckCurl</a>, <a class="el" href="classHMWorkAuxFetchCurl.html#af6acdf5ecd8cdce33c5f51e150afd173">HMWorkAuxFetchCurl</a>, <a class="el" href="classHMWorkDNSLookup.html#aa71a567001a8128da41a6e768362b69d">HMWorkDNSLookup</a>, <a class="el" href="classHMWorkDNSLookupAres.html#ae7554071f491f330363081503ca28eb6">HMWorkDNSLookupAres</a>, <a class="el" href="classHMWorkHealthCheckNone.html#a94ff0282f8afb1cd439f19e3cf07fc4f">HMWorkHealthCheckNone</a>, and <a class="el" href="classHMWorkDNSLookupLibEvent.html#a0d0a240d604365572ee1d90e3dfe1ca0">HMWorkDNSLookupLibEvent</a>.</p>

</div>
</div>
<a id="a9f872d970567c7fe6457cd3283ceda10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f872d970567c7fe6457cd3283ceda10">&#9670;&nbsp;</a></span>processWork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual HM_WORK_STATUS HMWork::processWork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to process the work in the work order. </p>
<p>Called by the worker thread to conduct the work. </p><dl class="section return"><dt>Returns</dt><dd>The return specifies how the work should be processed. In the case of HM_WORK_COMPLETE or HM_WORK_IDLE, the work order is complete and destructed. HM_WORK_IN_PROGRESS moves the work order to the work map in the queue. The work must schedule a callback to have the queue move the work from the map back into the active queue to finish the processing (continuation). </dd></dl>

<p>Implemented in <a class="el" href="classHMWorkAuxFetch.html#a28ff943c6e11cff5abebbb927e936627">HMWorkAuxFetch</a>, <a class="el" href="classHMWorkHealthCheck.html#a451c4b284a53ae368b0da39e653fd9cc">HMWorkHealthCheck</a>, and <a class="el" href="classHMWorkDNSLookup.html#a054c47c460fa1f77ce1cd62bd5994d00">HMWorkDNSLookup</a>.</p>

</div>
</div>
<a id="abb8b7ac5f0ac87c352fdccaf921cedaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb8b7ac5f0ac87c352fdccaf921cedaf">&#9670;&nbsp;</a></span>updateState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HMWork::updateState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHMStateManager.html">HMStateManager</a> *&#160;</td>
          <td class="paramname"><em>stateManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classHMEventLoop.html">HMEventLoop</a> *&#160;</td>
          <td class="paramname"><em>eventLoop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to update the state manager and event loop in case of a reload. </p>
<p>Called to update the state manager and event loop in case of a reload. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>pointer to the current state manager. </td></tr>
    <tr><td class="paramname">a</td><td>pointer to the cureent event loop. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/internal/<a class="el" href="HMWork_8h_source.html">HMWork.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
